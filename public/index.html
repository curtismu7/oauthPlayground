<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PingOne User Import v5.1</title>
    <!-- Ping Identity Official CSS -->
    <link rel="stylesheet" href="https://assets.pingone.com/ux/end-user-nano/0.1.0-alpha.9/end-user-nano.css">
    <link rel="stylesheet" href="https://assets.pingone.com/ux/astro-nano/0.1.0-alpha.11/icons.css">
    <!-- Bootstrap CSS -->
    <link href="/vendor/bootstrap/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/styles-fixed.css">
    <!-- Ping Identity Theme CSS -->
    <link rel="stylesheet" href="/css/ping-identity.css">
    <!-- Token Status Indicator CSS -->
    <link rel="stylesheet" href="/css/token-status-indicator.css">
    <!-- Progress UI CSS -->
    <link rel="stylesheet" href="/css/progress-ui.css">
    <!-- Disclaimer Modal CSS -->
    <link rel="stylesheet" href="/css/disclaimer-modal.css">
    <!-- Disclaimer Banner Script -->
    <script src="/js/modules/disclaimer-banner.js"></script>
    <!-- Disclaimer Modal Script -->
    <script src="/js/modules/disclaimer-modal.js"></script>
    <!-- Token Status Indicator Script -->
    <script src="/js/modules/token-status-indicator.js"></script>
</head>
<body>
    <div class="app-container ping-identity-theme">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <img src="https://raw.githubusercontent.com/curtismu7/CDN/fd81b602d8c3635a8ca40aab169c83b86eae2dc0/Ping%20Identity_idEzgMTpXK_1.svg" alt="Ping Identity" class="logo">
            </div>
            <ul class="nav-links">
                <li class="nav-item active" data-view="home">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </li>
                <li class="nav-item" data-view="import">
                    <i class="fas fa-upload"></i>
                    <span>Import</span>
                </li>
                <li class="nav-item" data-view="history">
                    <i class="fas fa-history"></i>
                    <span>History</span>
                </li>
                <li class="nav-item" data-view="delete-csv">
                    <i class="fas fa-trash"></i>
                    <span>Delete</span>
                </li>
                <li class="nav-item" data-view="modify">
                    <i class="fas fa-edit"></i>
                    <span>Modify</span>
                </li>
                <li class="nav-item" data-view="export">
                    <i class="fas fa-download"></i>
                    <span>Export</span>
                </li>
                <li class="nav-item" data-view="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </li>
                <li class="nav-item" data-view="logs">
                    <i class="fas fa-list"></i>
                    <span>Logs</span>
                </li>
                <!-- Progress page navigation item - controlled by progressPage feature flag -->
                <li class="nav-item" data-view="progress" data-feature-flag="progressPage" style="display: none;">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Persistent Animated Status Bar -->
            <div id="status-bar" class="status-bar"></div>
            <!-- Version Badge -->
            <div id="version-badge-top" class="version-badge-top">
                <span id="version-text">v5.0</span>
            </div>
            
            <!-- Universal Disclaimer Banner -->
            <div id="universal-disclaimer" class="universal-disclaimer-banner">
                <div class="disclaimer-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span><strong>DISCLAIMER:</strong> This tool is unsupported and provided as-is. Ping Identity is not liable for any harm or data loss. Please backup your PingOne account and test in non-production environments only.</span>
                </div>
            </div>
            
            <!-- Connection Status -->
            <div id="connection-status" class="connection-status" style="display: none;"></div>
            <!-- Notification Area -->
            <div id="notification-area" class="notification-area"></div>
            
            <!-- Universal Token Status Bar - Moved to main content area for better visibility -->
            <div id="universal-token-status" class="universal-token-status">
                <div class="token-status-bar">
                    <div class="token-status-content">
                        <span class="token-status-icon">⏳</span>
                        <span class="token-status-text">Checking token status...</span>
                        <span class="token-status-time"></span>
                    </div>
                    <div class="token-status-actions">
                        <button id="refresh-token-status" class="btn btn-sm btn-outline-secondary" title="Refresh token status">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button id="get-token-quick" class="btn btn-sm btn-success" title="Get new token" style="display: none;">
                            <i class="fas fa-key"></i> Get Token
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Home View -->
            <div id="home-view" class="view active">
                <div class="home-header">
                    <h1>PingOne User Import Tool</h1>
                    
                    <!-- Disclaimer Status Display -->
                    <div id="disclaimer-status" class="disclaimer-status-box" style="display: none;">
                        <div class="disclaimer-status-header">
                            <h3>✅ Disclaimer Accepted</h3>
                            <p><strong>You have acknowledged the disclaimer and can now use the tool.</strong></p>
                        </div>
                        <div class="disclaimer-status-info">
                            <p><i class="fas fa-check-circle"></i> Application is enabled and ready for use.</p>
                            <p><i class="fas fa-info-circle"></i> You can reset the disclaimer acceptance in the browser's developer console.</p>
                        </div>
                    </div>
                </div>
                
                <div class="feature-cards">
                    <div class="feature-card" data-view="import">
                        <i class="fas fa-upload fa-2x"></i>
                        <h3>Import Users</h3>
                        <p>Bulk import users from CSV into PingOne.</p>
                    </div>
                    <div class="feature-card" data-view="delete-csv">
                        <i class="fas fa-trash fa-2x"></i>
                        <h3>Delete Users</h3>
                        <p>Bulk delete users from CSV in PingOne.</p>
                    </div>
                    <div class="feature-card" data-view="modify">
                        <i class="fas fa-edit fa-2x"></i>
                        <h3>Modify Users</h3>
                        <p>Bulk modify existing users in PingOne.</p>
                    </div>
                    <div class="feature-card" data-view="export">
                        <i class="fas fa-download fa-2x"></i>
                        <h3>Export Users</h3>
                        <p>Export all users from PingOne to CSV format.</p>
                    </div>
                    <div class="feature-card" data-view="settings">
                        <i class="fas fa-cog fa-2x"></i>
                        <h3>Settings</h3>
                        <p>Configure your PingOne environment and API credentials.</p>
                    </div>
                    <div class="feature-card" data-view="logs">
                        <i class="fas fa-list fa-2x"></i>
                        <h3>Logs</h3>
                        <p>View import, delete, and modify logs.</p>
                    </div>
                </div>
            </div>

            <!-- Import View -->
            <div id="import-view" class="view">
                <div class="import-header">
                    <h1>Import Users</h1>
                    <div class="import-actions">
                        <div class="import-buttons">
                            <button id="cancel-import-btn" class="btn btn-secondary" style="display: none;">
                                <i class="fas fa-times"></i> Cancel Import
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="import-content">
                    <div id="import-drop-zone" class="import-drop-zone" tabindex="0" aria-label="Drag and drop CSV file here or click to select">
                        <i class="fas fa-cloud-upload-alt fa-2x"></i>
                        <div><strong>Drag & Drop CSV File Here</strong></div>
                        <div style="font-size:0.95em; color:#888;">or click to browse files</div>
                    </div>
                    <div class="file-upload-container">
                        <input type="file" id="csv-file" accept=".csv,.txt" class="file-input">
                        <label for="csv-file" class="file-label">
                            <i class="fas fa-upload"></i>
                            <span>Choose CSV File</span>
                        </label>

                        <!-- File Information Section (moved here) -->
                        <div id="file-info" class="file-info" style="margin-top: 10px;">
                            <!-- File info will be displayed here -->
                        </div>
                    </div>

                    <!-- Population Selection -->
                    <div class="population-selection">
                        <h3>Select Population</h3>
                        <div class="population-options">
                            <div class="form-group">
                                <label for="import-population-select">Import Population:</label>
                                <select id="import-population-select" class="form-control">
                                    <option value="">Loading populations...</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Import Options -->
                    <div class="import-options">
                        <h3>Import Options</h3>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="skip-duplicates" checked>
                                Skip duplicate users (by email)
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="skip-duplicates-username">
                                Skip duplicate users (by username)
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="send-welcome-email" checked>
                                Send welcome email to new users
                            </label>
                        </div>
                    </div>

                    <!-- Import Button -->
                    <div class="form-actions">
                        <button id="start-import" class="btn btn-primary" disabled>
                            <i class="fas fa-upload"></i> Start Import
                        </button>
                    </div>
                </div>
            </div>

            <!-- History View -->
            <div id="history-view" class="view">
                <div class="history-header">
                    <h1>Operation History</h1>
                    <div class="history-actions">
                        <button id="refresh-history" class="btn btn-secondary">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button id="clear-history" class="btn btn-danger">
                            <i class="fas fa-trash"></i> Clear History
                        </button>
                        <button id="history-search-icon" class="btn btn-light" title="Search History" aria-label="Search History" style="margin-left:8px;">
                            <i class="fas fa-search"></i>
                        </button>
                        <input type="text" id="history-search-input" class="form-control" placeholder="Search history..." style="display:none; width:200px; margin-left:8px; vertical-align:middle;" aria-label="Search history">
                    </div>
                </div>
                
                <div class="history-content">
                    <div class="history-filters">
                        <div class="filter-group">
                            <label for="history-type-filter">Operation Type:</label>
                            <select id="history-type-filter" class="form-control">
                                <option value="">All Types</option>
                                <option value="IMPORT">Import</option>
                                <option value="EXPORT">Export</option>
                                <option value="DELETE">Delete</option>
                                <option value="MODIFY">Modify</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="history-population-filter">Population:</label>
                            <input type="text" id="history-population-filter" class="form-control" placeholder="Filter by population...">
                        </div>
                        <div class="filter-group">
                            <label for="history-date-start">Start Date:</label>
                            <input type="date" id="history-date-start" class="form-control">
                        </div>
                        <div class="filter-group">
                            <label for="history-date-end">End Date:</label>
                            <input type="date" id="history-date-end" class="form-control">
                        </div>
                        <div class="filter-group">
                            <button id="apply-history-filters" class="btn btn-primary">
                                <i class="fas fa-filter"></i> Apply Filters
                            </button>
                            <button id="clear-history-filters" class="btn btn-secondary">
                                <i class="fas fa-times"></i> Clear
                            </button>
                        </div>
                    </div>
                    
                    <div class="history-container" id="history-container">
                        <!-- History entries will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- Delete CSV View -->
            <div id="delete-csv-view" class="view">
                <div class="delete-header">
                    <h1>Delete Users</h1>
                    <div class="delete-actions">
                        <div class="delete-buttons">
                            <button id="cancel-delete-btn" class="btn btn-secondary" style="display: none;">
                                <i class="fas fa-times"></i> Cancel Delete
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="delete-content">
                    <!-- Delete Type Selection -->
                    <div class="delete-type-selection">
                        <h3>Select Delete Type</h3>
                        <div class="delete-type-options">
                            <div class="form-group">
                                <label class="radio-option">
                                    <input type="radio" name="delete-type" value="file" checked>
                                    <span class="radio-label">
                                        <i class="fas fa-file-csv"></i>
                                        <strong>Delete by File</strong>
                                        <small>Delete users from a CSV file</small>
                                    </span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="radio-option">
                                    <input type="radio" name="delete-type" value="population">
                                    <span class="radio-label">
                                        <i class="fas fa-users"></i>
                                        <strong>Delete by Population</strong>
                                        <small>Delete all users in a specific population</small>
                                    </span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="radio-option">
                                    <input type="radio" name="delete-type" value="environment">
                                    <span class="radio-label">
                                        <i class="fas fa-exclamation-triangle text-danger"></i>
                                        <strong>Delete All Users</strong>
                                        <small>Delete ALL users in the environment (IRREVERSIBLE)</small>
                                    </span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- File Upload Section (shown when "Delete by File" is selected) -->
                    <div id="delete-file-section" class="delete-section">
                        <div id="delete-drop-zone" class="import-drop-zone" tabindex="0" aria-label="Drag and drop CSV file here or click to select">
                            <i class="fas fa-cloud-upload-alt fa-2x"></i>
                            <div><strong>Drag & Drop CSV File Here</strong></div>
                            <div style="font-size:0.95em; color:#888;">Drop a file here to delete users by population</div>
                        </div>
                        <div class="file-upload-container">
                            <input type="file" id="delete-csv-file" accept=".csv,.txt" class="file-input">
                            <label for="delete-csv-file" class="file-label">
                                <i class="fas fa-trash"></i>
                                <span>Choose CSV File with Users to Delete</span>
                            </label>

                            <div id="delete-file-info" class="file-info" style="margin-top: 10px;">
                                <!-- File info will be displayed here -->
                            </div>
                        </div>
                    </div>

                    <!-- Population Selection Section (shown when "Delete by Population" is selected) -->
                    <div id="delete-population-section" class="delete-section" style="display: none;">
                        <div class="population-selection">
                            <h3>Select Population to Delete</h3>
                            <div class="population-options">
                                <div class="form-group">
                                    <label for="delete-population-select">Population:</label>
                                    <select id="delete-population-select" class="form-control">
                                        <option value="">Loading populations...</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Environment Delete Warning Section (shown when "Delete All Users" is selected) -->
                    <div id="delete-environment-section" class="delete-section" style="display: none;">
                        <div class="environment-delete-warning">
                            <div class="alert alert-danger">
                                <h4><i class="fas fa-exclamation-triangle"></i> WARNING: Full Environment Deletion</h4>
                                <p><strong>This action will delete ALL users in your PingOne environment.</strong></p>
                                <ul>
                                    <li>This action is <strong>IRREVERSIBLE</strong></li>
                                    <li>All user accounts will be permanently deleted</li>
                                    <li>No backup will be created automatically</li>
                                    <li>This may affect all applications using this environment</li>
                                    <li>All user data, settings, and configurations will be lost</li>
                                </ul>
                                <p><strong>Please ensure you have a backup before proceeding.</strong></p>
                            </div>
                        </div>
                    </div>

                    <!-- Delete Options -->
                    <div class="delete-options">
                        <h3>Delete Options</h3>
                        
                        <!-- Standard confirmation for file/population deletes -->
                        <div id="standard-confirmation" class="form-group">
                            <label>
                                <input type="checkbox" id="confirm-delete" required>
                                I confirm that I want to delete these users permanently
                            </label>
                        </div>

                        <!-- Enhanced confirmation for environment delete -->
                        <div id="environment-confirmation" class="form-group" style="display: none;">
                            <div class="alert alert-warning">
                                <label>
                                    <input type="checkbox" id="confirm-environment-delete" required>
                                    <strong>I understand this will delete ALL users in the environment</strong>
                                </label>
                                <div class="form-group" style="margin-top: 10px;">
                                    <label for="environment-delete-text">Type "DELETE ALL" to confirm:</label>
                                    <input type="text" id="environment-delete-text" class="form-control" placeholder="Type DELETE ALL to confirm">
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="delete-skip-not-found" checked>
                                Skip users not found in the population
                            </label>
                        </div>
                    </div>

                    <!-- Delete Button -->
                    <div class="form-actions">
                        <button id="start-delete" class="btn btn-danger" disabled>
                            <i class="fas fa-trash"></i> Start Delete
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modify View -->
            <div id="modify-view" class="view">
                <div class="modify-header">
                    <h1>Modify Users</h1>
                    <div class="modify-actions">
                        <div class="modify-buttons">
                            <button id="cancel-modify-btn" class="btn btn-secondary" style="display: none;">
                                <i class="fas fa-times"></i> Cancel Modify
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="modify-content">
                    <div id="modify-drop-zone" class="import-drop-zone" tabindex="0" aria-label="Drag and drop CSV file here or click to select">
                        <i class="fas fa-cloud-upload-alt fa-2x"></i>
                        <div><strong>Drag & Drop CSV File Here</strong></div>
                        <div style="font-size:0.95em; color:#888;">or click to browse files</div>
                    </div>
                    <div class="file-upload-container">
                        <input type="file" id="modify-csv-file" accept=".csv,.txt" class="file-input">
                        <label for="modify-csv-file" class="file-label">
                            <i class="fas fa-edit"></i>
                            <span>Choose CSV File with User Updates</span>
                        </label>

                        <!-- File Information Section (moved here to match Import page) -->
                        <div id="modify-file-info" class="file-info" style="margin-top: 10px;">
                            <!-- File info will be displayed here -->
                        </div>
                    </div>

                    <!-- Population Selection -->
                    <div class="population-selection">
                        <h3>Select Population</h3>
                        <div class="population-options">
                            <div class="form-group">
                                <label for="modify-population-select">Population:</label>
                                <select id="modify-population-select" class="form-control">
                                    <option value="">Loading populations...</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Modify Options -->
                    <div class="modify-options">
                        <h3>Modify Options</h3>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="modify-skip-not-found" checked>
                                Skip users not found in the population
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="modify-update-email" checked>
                                Update email addresses if changed
                            </label>
                        </div>
                    </div>

                    <!-- Modify Button -->
                    <div class="form-actions">
                        <button id="start-modify" class="btn btn-warning" disabled>
                            <i class="fas fa-edit"></i> Start Modify
                        </button>
                    </div>
                </div>
            </div>

            <!-- Export View -->
            <div id="export-view" class="view">
                <div class="export-header">
                    <h1>Export Users</h1>
                </div>
                
                <div class="export-content">
                    <!-- Population Selection -->
                    <div class="export-population-section">
                        <h3>Select Population</h3>
                        <div class="form-group">
                            <label for="export-population-select">Population:</label>
                            <select id="export-population-select" class="form-control" required>
                                <option value="">Select a population...</option>
                                <option value="ALL">ALL - Export from all populations</option>
                            </select>
                            <small class="form-text">Select a specific population or ALL to export from all populations</small>
                        </div>
                    </div>

                    <!-- Export Credentials Override Section -->
                    <div class="export-credentials-section">
                        <h3>Export Credentials</h3>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="export-use-override-credentials">
                                Change credentials for Export only
                            </label>
                            <small class="form-text">Use different credentials for this export operation</small>
                        </div>
                        
                        <div id="export-credentials-fields" class="credentials-fields" style="display: none;">
                            <div class="form-group">
                                <label for="export-environment-id">Environment ID:</label>
                                <input type="text" id="export-environment-id" class="form-control" placeholder="Enter environment ID">
                            </div>
                            
                            <div class="form-group">
                                <label for="export-api-client-id">API Client ID:</label>
                                <input type="text" id="export-api-client-id" class="form-control" placeholder="Enter API client ID">
                            </div>
                            
                            <div class="form-group">
                                <label for="export-api-secret">API Secret:</label>
                                <div class="input-group">
                                    <input type="password" id="export-api-secret" class="form-control" placeholder="Enter API secret">
                                    <button type="button" id="toggle-export-secret-visibility" class="btn btn-outline-secondary" aria-label="Toggle password visibility">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="export-region">Region:</label>
                                <select id="export-region" class="form-control">
                                    <option value="NA">North America (excluding Canada)</option>
                                    <option value="CA">Canada</option>
                                    <option value="EU">European Union</option>
                                    <option value="AU">Australia</option>
                                    <option value="SG">Singapore</option>
                                    <option value="AP">Asia-Pacific</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <button type="button" id="generate-export-token" class="btn btn-primary">
                                    <i class="fas fa-key"></i> Generate Export Token
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Export Token Status -->
                    <div id="export-token-status" class="token-status-section" style="display: none;">
                        <h3>Export Token Status</h3>
                        <div class="token-status-display">
                            <div class="token-timer">
                                <span class="token-status-label">Time Remaining:</span>
                                <span id="export-token-timer" class="token-timer-value">--:--</span>
                                <span id="export-token-status-indicator" class="token-status-indicator">●</span>
                            </div>
                            
                            <div class="token-metadata">
                                <div class="token-info">
                                    <strong>Scopes:</strong> <span id="export-token-scopes">--</span>
                                </div>
                                <div class="token-info">
                                    <strong>Environment:</strong> <span id="export-token-environment">--</span>
                                </div>
                                <div class="token-info">
                                    <strong>Expires:</strong> <span id="export-token-expires">--</span>
                                </div>
                            </div>
                            
                            <div class="token-actions">
                                <button type="button" id="view-export-token" class="btn btn-outline-info btn-sm">
                                    <i class="fas fa-eye"></i> View Raw Token
                                </button>
                                <button type="button" id="refresh-export-token" class="btn btn-outline-warning btn-sm">
                                    <i class="fas fa-sync-alt"></i> Refresh Token
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- JWT Decoder Panel -->
                    <div id="export-jwt-panel" class="jwt-panel" style="display: none;">
                        <h3>JWT Token Details</h3>
                        <div class="jwt-sections">
                            <div class="jwt-section">
                                <h4>Raw Token</h4>
                                <div class="jwt-content">
                                    <pre id="export-jwt-raw" class="jwt-raw"></pre>
                                    <button type="button" id="copy-jwt-raw" class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-copy"></i> Copy
                                    </button>
                                </div>
                            </div>
                            
                            <div class="jwt-section">
                                <h4>Header</h4>
                                <div class="jwt-content">
                                    <pre id="export-jwt-header" class="jwt-decoded"></pre>
                                    <button type="button" id="copy-jwt-header" class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-copy"></i> Copy
                                    </button>
                                </div>
                            </div>
                            
                            <div class="jwt-section">
                                <h4>Payload</h4>
                                <div class="jwt-content">
                                    <pre id="export-jwt-payload" class="jwt-decoded"></pre>
                                    <button type="button" id="copy-jwt-payload" class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-copy"></i> Copy
                                    </button>
                                </div>
                            </div>
                            
                            <div class="jwt-section">
                                <h4>Signature</h4>
                                <div class="jwt-content">
                                    <pre id="export-jwt-signature" class="jwt-signature"></pre>
                                    <button type="button" id="copy-jwt-signature" class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-copy"></i> Copy
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="jwt-panel-actions">
                            <button type="button" id="close-jwt-panel" class="btn btn-secondary">
                                <i class="fas fa-times"></i> Close
                            </button>
                        </div>
                    </div>

                    <!-- Export Options -->
                    <div class="export-options-container">
                        <h3>Export Options</h3>
                        <div class="form-group">
                            <label for="export-population-filter">User Status Filter:</label>
                            <select id="export-population-filter" class="form-control">
                                <option value="all" selected>All Users</option>
                                <option value="active">Active Users Only</option>
                                <option value="inactive">Inactive Users Only</option>
                                <option value="archived">Archived Users Only</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="export-format">Export Format:</label>
                            <select id="export-format" class="form-control">
                                <option value="csv">CSV</option>
                                <option value="json">JSON</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="export-include-disabled" checked>
                                Include disabled users
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="export-include-metadata" checked>
                                Include user metadata
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button id="start-export" class="btn btn-success" disabled>
                            <i class="fas fa-download"></i> Start Export
                        </button>
                    </div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settings-view" class="view">
                <div class="settings-header">
                    <h1>Settings</h1>
                </div>
                
                <div class="settings-content">
                    <form class="settings-section">
                        <h3>PingOne Configuration</h3>
                        
                        <div class="form-group">
                            <label for="environment-id">Environment ID:</label>
                            <input type="text" id="environment-id" class="form-control" placeholder="Enter your PingOne environment ID">
                        </div>
                        
                        <div class="form-group">
                            <label for="api-client-id">API Client ID:</label>
                            <input type="text" id="api-client-id" class="form-control" placeholder="Enter your PingOne API client ID">
                        </div>
                        
                        <div class="form-group">
                            <label for="api-secret">API Secret:</label>
                            <div class="input-group">
                                <input type="password" id="api-secret" class="form-control" placeholder="Enter your PingOne API secret">
                                <button type="button" id="toggle-api-secret-visibility" class="btn btn-outline-secondary" aria-label="Toggle password visibility">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="region">Region:</label>
                            <select id="region" class="form-control" aria-label="Select PingOne region">
                                <option value="NA" data-tld="com">North America (excluding Canada)</option>
                                <option value="CA" data-tld="ca">Canada</option>
                                <option value="EU" data-tld="eu">European Union</option>
                                <option value="AU" data-tld="com.au">Australia</option>
                                <option value="SG" data-tld="sg">Singapore</option>
                                <option value="AP" data-tld="asia">Asia-Pacific</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="rate-limit">Rate Limit (requests per minute):</label>
                            <input type="number" id="rate-limit" class="form-control" value="90" min="1" max="1000">
                        </div>
                        
                        <div class="form-group">
                            <label for="population-id">Default Population ID:</label>
                            <input type="text" id="population-id" class="form-control" 
                                   placeholder="Enter default population ID (optional)"
                                   pattern="[a-fA-F0-9\-]{36}"
                                   title="Please enter a valid UUID format (36 characters, alphanumeric with hyphens)"
                                   maxlength="36">
                            <small class="form-text">Optional: Set a default population ID for imports (UUID format)</small>
                        </div>
                    </form>
                    
                    <div class="form-actions">
                        <button id="save-settings" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                        <button id="test-connection" class="btn btn-secondary">
                            <i class="fas fa-plug"></i> Test Connection
                        </button>
                    </div>
                    
                    <div class="settings-status-container">
                        <div id="settings-connection-status" class="connection-status" style="display: none;"></div>
                        <div class="settings-save-status" id="settings-save-status"></div>
                    </div>
                    
                    <!-- Feature Flags Diagnostics Panel -->
                    <div class="settings-section">
                        <h3>Feature Flags Diagnostics</h3>
                        <p class="text-muted">Admin panel for managing feature flags and diagnostics</p>
                        
                        <div class="feature-flags-panel" id="feature-flags-panel" style="display: none;">
                            <div class="feature-flags-header">
                                <h4>Feature Flags Status</h4>
                                <button id="close-feature-flags" class="btn btn-sm btn-secondary">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            
                            <div class="feature-flags-content">
                                <!-- Feature flags will be populated here -->
                            </div>
                            
                            <div class="feature-flags-actions">
                                <button id="reset-feature-flags" class="btn btn-warning btn-sm">
                                    <i class="fas fa-undo"></i> Reset to Defaults
                                </button>
                                <button id="refresh-feature-flags" class="btn btn-info btn-sm">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                            
                            <div id="feature-flags-status" class="feature-flags-status"></div>
                        </div>
                        
                        <div class="feature-flags-controls">
                            <button id="feature-flags-toggle" class="btn btn-outline-secondary">
                                <i class="fas fa-toggle-on"></i> Show Feature Flags
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logs View -->
            <div id="logs-view" class="view">
                <div class="logs-header">
                    <h1>Logs</h1>
                    <div class="logs-actions">
                        <button id="refresh-logs" class="btn btn-secondary">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button id="clear-logs" class="btn btn-danger">
                            <i class="fas fa-trash"></i> Clear Logs
                        </button>
                        <button id="logs-search-icon" class="btn btn-light" title="Search Logs" aria-label="Search Logs" style="margin-left:8px;">
                            <i class="fas fa-search"></i>
                        </button>
                        <input type="text" id="logs-search-input" class="form-control" placeholder="Search logs..." style="display:none; width:200px; margin-left:8px; vertical-align:middle;" aria-label="Search logs">
                    </div>
                </div>
                
                <div class="logs-content">
                    <div class="logs-container" id="logs-container">
                        <!-- Logs will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- Progress View -->
            <div id="progress-view" class="view">
                <div class="progress-header">
                    <h1>Progress</h1>
                    <button class="close-progress-btn" id="close-progress-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="progress-content">
                    <div class="progress-container" id="progress-container">
                        <!-- Progress will be displayed here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Ping Identity UI/UX Disclaimer -->
    <div class="ping-disclaimer">
        <p>
            This application uses Ping Identity's UI/UX design system. 
            For more information about Ping Identity's design guidelines, 
            visit <a href="https://library.pingidentity.com/" target="_blank" rel="noopener noreferrer">Ping Identity Design Library</a>.
        </p>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
      <div class="footer-content">
        <div class="footer-logo">
          <img src="/ping-identity-logo.svg" alt="Ping Identity Logo" height="28" width="auto" loading="lazy" />
        </div>
        <div class="footer-text">
          <span>&copy; 2025 Ping Identity. All rights reserved.</span>
        </div>
      </div>
    </footer>

    <!-- JavaScript -->
    <script src="/js/bundle.js"></script>
    <script src="/js/modules/log-manager.js"></script>
</body>
</html>
