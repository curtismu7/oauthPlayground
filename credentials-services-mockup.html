<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OAuth Playground - Credentials Services Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background: #f8fafc;
        }

        .container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 2rem;
            font-weight: 600;
        }

        .header p {
            margin: 0.5rem 0 0 0;
            opacity: 0.9;
        }

        .section {
            padding: 2rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0 0 1rem 0;
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .service-card {
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 1.5rem;
            background: #f9fafb;
        }

        .service-card h4 {
            margin: 0 0 1rem 0;
            color: #1f2937;
            font-weight: 600;
        }

        .feature-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .feature-list li {
            padding: 0.25rem 0;
            font-size: 0.875rem;
            color: #4b5563;
        }

        .feature-list li:before {
            content: "‚úì ";
            color: #10b981;
            font-weight: bold;
        }

        .form-mockup {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .form-field {
            margin-bottom: 1rem;
        }

        .form-field label {
            display: block;
            margin-bottom: 0.25rem;
            font-weight: 500;
            color: #374151;
            font-size: 0.875rem;
        }

        .form-field input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 0.875rem;
            background: white;
        }

        .form-field input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.875rem;
            cursor: pointer;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .button:hover {
            background: #2563eb;
        }

        .button.secondary {
            background: #6b7280;
        }

        .button.secondary:hover {
            background: #4b5563;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .status-card {
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid;
        }

        .status-card.credentials {
            background: #fef3c7;
            border-color: #f59e0b;
        }

        .status-card.discovery {
            background: #dbeafe;
            border-color: #3b82f6;
        }

        .status-card.config {
            background: #dcfce7;
            border-color: #22c55e;
        }

        .status-card h4 {
            margin: 0 0 0.5rem 0;
            font-weight: 600;
        }

        .status-text {
            font-size: 0.875rem;
            margin: 0.25rem 0;
            color: #4b5563;
        }

        .flow-diagram {
            background: #f9fafb;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 1rem;
            font-family: monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            white-space: pre-line;
            overflow-x: auto;
        }

        .toast-demo {
            background: #10b981;
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            margin: 0.5rem 0;
            font-size: 0.875rem;
            display: none;
        }

        .toast-demo.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .discovery-result {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.75rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ OAuth Playground Credentials Services</h1>
            <p>Interactive mock demonstrating three key services with auto-save functionality</p>
        </div>

        <!-- Service Overview -->
        <div class="section">
            <h2 class="section-title">üìã Service Overview</h2>
            <div class="service-grid">
                <div class="service-card">
                    <h4>üîë CredentialsInput Service</h4>
                    <div style="background: #f1f5f9; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.75rem; font-family: monospace; font-size: 0.75rem;">
                        <strong>File:</strong> src/components/CredentialsInput.tsx<br>
                        <strong>Component:</strong> CredentialsInput<br>
                        <strong>Service Name:</strong> "CredentialsInput" or "credentials-input"
                    </div>
                    <ul class="feature-list">
                        <li>Unified credential input interface</li>
                        <li>Environment ID, Client ID, Client Secret</li>
                        <li>Copy-to-clipboard functionality</li>
                        <li>Real-time validation</li>
                        <li>Auto-save trigger integration</li>
                        <li>Response mode selection</li>
                    </ul>
                </div>
                
                <div class="service-card">
                    <h4>üåê OIDC Discovery Service</h4>
                    <div style="background: #f1f5f9; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.75rem; font-family: monospace; font-size: 0.75rem;">
                        <strong>Files:</strong><br>
                        ‚Ä¢ src/services/oidcDiscoveryService.ts<br>
                        ‚Ä¢ src/components/EnvironmentIdInput.tsx<br>
                        <strong>Service Name:</strong> "oidcDiscoveryService" or "OIDC-discovery"
                    </div>
                    <ul class="feature-list">
                        <li>Automatic endpoint discovery</li>
                        <li>PingOne environment detection</li>
                        <li>Multi-region support (US/EU/AP/CA)</li>
                        <li>Configuration validation</li>
                        <li>Issuer URL construction</li>
                        <li>Cache management</li>
                    </ul>
                </div>
                
                <div class="service-card">
                    <h4>‚öôÔ∏è PingOne Advanced Config</h4>
                    <div style="background: #f1f5f9; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.75rem; font-family: monospace; font-size: 0.75rem;">
                        <strong>File:</strong> src/components/PingOneApplicationConfig.tsx<br>
                        <strong>Component:</strong> PingOneApplicationConfig<br>
                        <strong>Service Name:</strong> "PingOneApplicationConfig" or "pingone-config"
                    </div>
                    <ul class="feature-list">
                        <li>Client authentication methods</li>
                        <li>PKCE enforcement settings</li>
                        <li>Response & grant types</li>
                        <li>JWKS configuration</li>
                        <li>PAR (Pushed Auth Request)</li>
                        <li>Security enhancements</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Interactive Demo -->
        <div class="section">
            <h2 class="section-title">üéØ Interactive Demo</h2>
            
            <!-- OIDC Discovery Mock -->
            <div class="form-mockup">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h4>üåê OIDC Discovery Service</h4>
                    <div style="font-family: monospace; font-size: 0.75rem; color: #6b7280; text-align: right;">
                        <div><strong>Files:</strong></div>
                        <div>src/services/oidcDiscoveryService.ts</div>
                        <div>src/components/EnvironmentIdInput.tsx</div>
                        <div><strong>Service:</strong> "oidcDiscoveryService"</div>
                    </div>
                </div>
                <div class="form-field">
                    <label for="environmentId">Environment ID / Custom Issuer</label>
                    <input type="text" id="environmentId" placeholder="e.g., a1b2c3d4-e5f6-7890-abcd-ef1234567890" oninput="handleEnvironmentIdChange()">
                </div>
                <button class="button" onclick="triggerDiscovery()">üîç Start OIDC Discovery</button>
                <button class="button secondary" onclick="showSuggestions()">üí° Show Suggestions</button>
                
                <div id="discoveryResult" class="discovery-result" style="display: none;">
                    <h4>üéØ Discovery Result:</h4>
                    <div id="discoveryContent"></div>
                </div>
            </div>

            <!-- Credentials Input Mock -->
            <div class="form-mockup">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h4>üîë Credentials Input Service</h4>
                    <div style="font-family: monospace; font-size: 0.75rem; color: #6b7280; text-align: right;">
                        <div><strong>File:</strong> src/components/CredentialsInput.tsx</div>
                        <div><strong>Component:</strong> CredentialsInput</div>
                        <div><strong>Service:</strong> "CredentialsInput"</div>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-field">
                        <label for="credEnvId">Environment ID</label>
                        <input type="text" id="credEnvId" placeholder="Auto-populated from discovery" oninput="handleCredentialChange()">
                    </div>
                    <div class="form-field">
                        <label for="clientId">Client ID</label>
                        <input type="text" id="clientId" placeholder="OAuth application client ID" oninput="handleCredentialChange()">
                    </div>
                    <div class="form-field">
                        <label for="clientSecret">Client Secret</label>
                        <input type="password" id="clientSecret" placeholder="OAuth application secret" oninput="handleCredentialChange()">
                    </div>
                    <div class="form-field">
                        <label for="redirectUri">Redirect URI</label>
                        <input type="text" id="redirectUri" value="https://localhost:3000/callback">
                    </div>
                </div>
                <button class="button" onclick="copyToClipboard('clientId')">üìã Copy Client ID</button>
                <button class="button" onclick="copyToClipboard('clientSecret')">üìã Copy Secret</button>
                <button class="button" onclick="manualSave()">üíæ Save Configuration</button>
            </div>

            <!-- PingOne Config Mock -->
            <div class="form-mockup">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h4>‚öôÔ∏è PingOne Advanced Configuration</h4>
                    <div style="font-family: monospace; font-size: 0.75rem; color: #6b7280; text-align: right;">
                        <div><strong>File:</strong> src/components/PingOneApplicationConfig.tsx</div>
                        <div><strong>Component:</strong> PingOneApplicationConfig</div>
                        <div><strong>Service:</strong> "PingOneApplicationConfig"</div>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                    <div class="form-field">
                        <label for="authMethod">Client Auth Method</label>
                        <select id="authMethod" onchange="handleConfigChange()">
                            <option value="client_secret_post">Client Secret POST</option>
                            <option value="client_secret_basic">Client Secret Basic</option>
                            <option value="private_key_jwt">Private Key JWT</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="pkceEnforcement">PKCE Enforcement</label>
                        <select id="pkceEnforcement" onchange="handleConfigChange()">
                            <option value="REQUIRED">Required</option>
                            <option value="OPTIONAL">Optional</option>
                            <option value="NOT_REQUIRED">Not Required</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label>Response Types</label>
                        <div style="font-size: 0.875rem;">
                            <input type="checkbox" id="responseCode" checked onchange="handleConfigChange()"> Code
                            <input type="checkbox" id="responseToken" onchange="handleConfigChange()"> Token
                            <input type="checkbox" id="responseIdToken" checked onchange="handleConfigChange()"> ID Token
                        </div>
                    </div>
                </div>
                <button class="button" onclick="updateAdvancedConfig()">‚öôÔ∏è Update Configuration</button>
                <button class="button secondary" onclick="resetToDefaults()">üîÑ Reset to Defaults</button>
            </div>
        </div>

        <!-- Auto-save Status -->
        <div class="section">
            <h2 class="section-title">üìä Auto-save Status Monitor</h2>
            <div class="status-grid">
                <div class="status-card credentials">
                    <h4>üîë Credentials</h4>
                    <p class="status-text">Environment ID: <span id="statusEnvId">Not set</span></p>
                    <p class="status-text">Client ID: <span id="statusClientId">Not set</span></p>
                    <p class="status-text">Client Secret: <span id="statusClientSecret">Not set</span></p>
                    <p class="status-text">Auto-save Ready: <span id="statusAutoSave">‚ùå No</span></p>
                </div>
                
                <div class="status-card discovery">
                    <h4>üåê Discovery Status</h4>
                    <p class="status-text">Discovering: <span id="statusDiscovering">‚úÖ No</span></p>
                    <p class="status-text">Result: <span id="statusDiscoveryResult">‚ùå None</span></p>
                    <p class="status-text">Issuer: <span id="statusIssuer">Unknown</span></p>
                    <p class="status-text">Endpoints: <span id="statusEndpoints">0</span></p>
                </div>
                
                <div class="status-card config">
                    <h4>‚öôÔ∏è PingOne Config</h4>
                    <p class="status-text">Auth Method: <span id="statusAuthMethod">client_secret_post</span></p>
                    <p class="status-text">PKCE: <span id="statusPKCE">REQUIRED</span></p>
                    <p class="status-text">Response Types: <span id="statusResponseTypes">code, id_token</span></p>
                    <p class="status-text">Last Updated: <span id="statusLastUpdate">Never</span></p>
                </div>
            </div>
        </div>

        <!-- Auto-save Triggers -->
        <div class="section">
            <h2 class="section-title">üéØ Auto-save Trigger Points</h2>
            <div class="flow-diagram">üîÑ TRIGGER CONDITIONS:

1. Environment ID + Client ID
   ‚îî‚îÄ When both core identifiers are present
   ‚îî‚îÄ Enables basic OAuth flow configuration

2. OIDC Discovery + Client ID  
   ‚îî‚îÄ After successful .well-known/openid_configuration fetch
   ‚îî‚îÄ Auto-populates environment ID from PingOne issuer
   ‚îî‚îÄ Triggers save if client ID already present

3. Client Secret Addition
   ‚îî‚îÄ When completing the full credential set
   ‚îî‚îÄ Requires environment ID + client ID already present
   ‚îî‚îÄ Enables secure OAuth flows

4. PingOne Config Changes
   ‚îî‚îÄ When updating advanced application settings
   ‚îî‚îÄ Requires basic credentials (env ID + client ID) present
   ‚îî‚îÄ Saves enhanced security configuration

5. Manual Save Button
   ‚îî‚îÄ User-triggered save for confidence
   ‚îî‚îÄ Always available regardless of auto-save state</div>
        </div>

        <!-- Service Reference Guide -->
        <div class="section">
            <h2 class="section-title">üìö Service Reference Guide</h2>
            <p>Use these service names when requesting modifications or enhancements:</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem; margin-top: 1rem;">
                
                <div class="service-card" style="background: #fef3c7; border-color: #f59e0b;">
                    <h4>üîë CredentialsInput Service</h4>
                    <div style="font-family: monospace; font-size: 0.75rem; background: rgba(255,255,255,0.8); padding: 0.75rem; border-radius: 4px; margin: 0.5rem 0;">
                        <strong>File Path:</strong><br>
                        src/components/CredentialsInput.tsx<br><br>
                        
                        <strong>Service Names to Use:</strong><br>
                        ‚Ä¢ "CredentialsInput"<br>
                        ‚Ä¢ "credentials-input"<br>
                        ‚Ä¢ "credential input service"<br><br>
                        
                        <strong>Key Functions:</strong><br>
                        ‚Ä¢ FormGrid layout<br>
                        ‚Ä¢ Field validation<br>
                        ‚Ä¢ Copy functionality<br>
                        ‚Ä¢ Auto-save triggers
                    </div>
                </div>
                
                <div class="service-card" style="background: #dbeafe; border-color: #3b82f6;">
                    <h4>üåê OIDC Discovery Service</h4>
                    <div style="font-family: monospace; font-size: 0.75rem; background: rgba(255,255,255,0.8); padding: 0.75rem; border-radius: 4px; margin: 0.5rem 0;">
                        <strong>File Paths:</strong><br>
                        src/services/oidcDiscoveryService.ts<br>
                        src/components/EnvironmentIdInput.tsx<br><br>
                        
                        <strong>Service Names to Use:</strong><br>
                        ‚Ä¢ "oidcDiscoveryService"<br>
                        ‚Ä¢ "OIDC discovery"<br>
                        ‚Ä¢ "discovery service"<br>
                        ‚Ä¢ "EnvironmentIdInput"<br><br>
                        
                        <strong>Key Functions:</strong><br>
                        ‚Ä¢ .well-known discovery<br>
                        ‚Ä¢ Environment ID extraction<br>
                        ‚Ä¢ Multi-region support<br>
                        ‚Ä¢ Cache management
                    </div>
                </div>
                
                <div class="service-card" style="background: #dcfce7; border-color: #22c55e;">
                    <h4>‚öôÔ∏è PingOne Application Config</h4>
                    <div style="font-family: monospace; font-size: 0.75rem; background: rgba(255,255,255,0.8); padding: 0.75rem; border-radius: 4px; margin: 0.5rem 0;">
                        <strong>File Path:</strong><br>
                        src/components/PingOneApplicationConfig.tsx<br><br>
                        
                        <strong>Service Names to Use:</strong><br>
                        ‚Ä¢ "PingOneApplicationConfig"<br>
                        ‚Ä¢ "pingone-config"<br>
                        ‚Ä¢ "advanced config"<br>
                        ‚Ä¢ "application config"<br><br>
                        
                        <strong>Key Functions:</strong><br>
                        ‚Ä¢ Client auth methods<br>
                        ‚Ä¢ PKCE enforcement<br>
                        ‚Ä¢ Response/grant types<br>
                        ‚Ä¢ JWKS & PAR settings
                    </div>
                </div>
            </div>
            
            <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 8px; padding: 1.5rem; margin-top: 1.5rem;">
                <h3 style="margin: 0 0 1rem 0; color: #1e40af;">üí° How to Request Service Changes</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h4 style="color: #059669; margin: 0.5rem 0;">‚úÖ Good Examples:</h4>
                        <ul style="font-size: 0.875rem; color: #374151;">
                            <li>"Update the <strong>CredentialsInput</strong> service to..."</li>
                            <li>"Modify <strong>oidcDiscoveryService</strong> to handle..."</li>
                            <li>"Enhance <strong>PingOneApplicationConfig</strong> with..."</li>
                            <li>"The <strong>discovery service</strong> needs to support..."</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #dc2626; margin: 0.5rem 0;">‚ùå Avoid Vague Terms:</h4>
                        <ul style="font-size: 0.875rem; color: #374151;">
                            <li>"Update the form" (which form?)</li>
                            <li>"Fix the config" (which config?)</li>
                            <li>"Change the input" (which input?)</li>
                            <li>"Modify the component" (which one?)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Messages -->
    <div id="toastContainer" style="position: fixed; top: 20px; right: 20px; z-index: 1000;"></div>

    <script>
        // Mock state
        let mockState = {
            environmentId: '',
            clientId: '',
            clientSecret: '',
            discoveryResult: null,
            isDiscovering: false,
            config: {
                authMethod: 'client_secret_post',
                pkceEnforcement: 'REQUIRED',
                responseTypes: ['code', 'id_token']
            }
        };

        // Toast functionality
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast-demo show`;
            toast.textContent = message;
            if (type === 'error') {
                toast.style.background = '#ef4444';
            } else if (type === 'info') {
                toast.style.background = '#3b82f6';
            }
            
            document.getElementById('toastContainer').appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Auto-save check
        function checkAutoSave() {
            const ready = mockState.environmentId.trim() && mockState.clientId.trim();
            document.getElementById('statusAutoSave').textContent = ready ? '‚úÖ Yes' : '‚ùå No';
            return ready;
        }

        // Handle environment ID changes
        function handleEnvironmentIdChange() {
            const value = document.getElementById('environmentId').value;
            mockState.environmentId = value;
            document.getElementById('credEnvId').value = value;
            updateStatus();
            
            if (value.trim() && mockState.clientId.trim()) {
                showToast('Auto-saved: Environment ID + Client ID combination');
            }
        }

        // Handle credential changes
        function handleCredentialChange() {
            const envId = document.getElementById('credEnvId').value;
            const clientId = document.getElementById('clientId').value;
            const clientSecret = document.getElementById('clientSecret').value;
            
            const oldEnvId = mockState.environmentId;
            const oldClientId = mockState.clientId;
            
            mockState.environmentId = envId;
            mockState.clientId = clientId;
            mockState.clientSecret = clientSecret;
            
            updateStatus();
            
            // Auto-save logic
            if (envId.trim() && clientId.trim() && (!oldEnvId.trim() || !oldClientId.trim())) {
                showToast('Auto-saved: Credential combination completed');
            } else if (clientSecret.trim() && envId.trim() && clientId.trim()) {
                showToast('Auto-saved: Client Secret completed the credential set');
            }
        }

        // Handle config changes
        function handleConfigChange() {
            const authMethod = document.getElementById('authMethod').value;
            const pkceEnforcement = document.getElementById('pkceEnforcement').value;
            const responseTypes = [];
            
            if (document.getElementById('responseCode').checked) responseTypes.push('code');
            if (document.getElementById('responseToken').checked) responseTypes.push('token');
            if (document.getElementById('responseIdToken').checked) responseTypes.push('id_token');
            
            mockState.config = { authMethod, pkceEnforcement, responseTypes };
            updateStatus();
            
            if (checkAutoSave()) {
                showToast('Auto-saved: PingOne configuration updated');
            }
        }

        // Trigger OIDC Discovery
        function triggerDiscovery() {
            const envId = document.getElementById('environmentId').value;
            if (!envId.trim()) {
                showToast('Please enter an Environment ID', 'error');
                return;
            }
            
            mockState.isDiscovering = true;
            updateStatus();
            showToast('Starting OIDC Discovery...', 'info');
            
            setTimeout(() => {
                // Mock successful discovery
                mockState.isDiscovering = false;
                mockState.discoveryResult = {
                    issuer: `https://auth.pingone.com/${envId}/as`,
                    authorization_endpoint: `https://auth.pingone.com/${envId}/as/authorize`,
                    token_endpoint: `https://auth.pingone.com/${envId}/as/token`,
                    userinfo_endpoint: `https://auth.pingone.com/${envId}/as/userinfo`,
                    jwks_uri: `https://auth.pingone.com/${envId}/as/jwks`
                };
                
                document.getElementById('discoveryResult').style.display = 'block';
                document.getElementById('discoveryContent').textContent = JSON.stringify(mockState.discoveryResult, null, 2);
                
                updateStatus();
                showToast('OIDC Discovery completed successfully!');
                
                if (mockState.clientId.trim()) {
                    showToast('Auto-saved: OIDC Discovery + Client ID combination');
                }
            }, 2000);
        }

        // Copy to clipboard
        function copyToClipboard(fieldId) {
            const field = document.getElementById(fieldId);
            field.select();
            document.execCommand('copy');
            showToast(`${fieldId} copied to clipboard!`);
        }

        // Manual save
        function manualSave() {
            if (checkAutoSave()) {
                showToast('Configuration saved successfully!');
            } else {
                showToast('Please enter Environment ID and Client ID to save', 'error');
            }
        }

        // Update status display
        function updateStatus() {
            document.getElementById('statusEnvId').textContent = mockState.environmentId || 'Not set';
            document.getElementById('statusClientId').textContent = mockState.clientId || 'Not set';
            document.getElementById('statusClientSecret').textContent = mockState.clientSecret ? '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢' : 'Not set';
            document.getElementById('statusDiscovering').textContent = mockState.isDiscovering ? 'üîÑ Yes' : '‚úÖ No';
            document.getElementById('statusDiscoveryResult').textContent = mockState.discoveryResult ? '‚úÖ Available' : '‚ùå None';
            document.getElementById('statusIssuer').textContent = mockState.discoveryResult?.issuer || 'Unknown';
            document.getElementById('statusEndpoints').textContent = mockState.discoveryResult ? Object.keys(mockState.discoveryResult).length : '0';
            document.getElementById('statusAuthMethod').textContent = mockState.config.authMethod;
            document.getElementById('statusPKCE').textContent = mockState.config.pkceEnforcement;
            document.getElementById('statusResponseTypes').textContent = mockState.config.responseTypes.join(', ');
            document.getElementById('statusLastUpdate').textContent = new Date().toLocaleTimeString();
            
            checkAutoSave();
        }

        // Show suggestions
        function showSuggestions() {
            showToast('Try: a1b2c3d4-e5f6-7890-abcd-ef1234567890', 'info');
        }

        // Update advanced config
        function updateAdvancedConfig() {
            handleConfigChange();
            showToast('Advanced configuration updated!');
        }

        // Reset to defaults
        function resetToDefaults() {
            document.getElementById('authMethod').value = 'client_secret_post';
            document.getElementById('pkceEnforcement').value = 'REQUIRED';
            document.getElementById('responseCode').checked = true;
            document.getElementById('responseToken').checked = false;
            document.getElementById('responseIdToken').checked = true;
            handleConfigChange();
            showToast('Configuration reset to defaults');
        }

        // Initialize
        updateStatus();
    </script>
</body>
</html>